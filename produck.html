<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marketplace Barang Baru & Bekas</title>

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

</head>
<body class="bg-gray-100">

<!-- HEADER -->
<div class="bg-white shadow p-4 text-center">
  <h1 class="text-xl font-bold">ğŸ›’ Marketplace Barang Baru & Bekas</h1>
  <p class="text-sm text-gray-600">Produk akan otomatis hilang setelah 7 hari</p>
</div>

<!-- KONTEN -->
<div class="max-w-4xl mx-auto p-4">

  <div class="bg-white rounded shadow p-4 mb-4">
    <h2 class="font-bold text-lg mb-1">ğŸ¤ Jual Produk Anda Bersama Kami</h2>
    <p class="text-sm text-gray-600 mb-3">
      Punya barang atau usaha sendiri? Upload produk Anda dan biarkan kami membantu memasarkannya.
    </p>

    <a href="FORM_LINK_KAMU"
       class="block bg-green-500 hover:bg-green-600 text-white text-center py-2 rounded font-bold">
       â• Upload Produk Anda di Sini
    </a>
  </div>

  <!-- PRODUK -->
  <div id="produkMember" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></div>

  <div class="text-center mt-6">
    <a href="index.html" class="text-blue-600 underline">â† Kembali ke Beranda</a>
  </div>

</div>

<!-- SCRIPT -->
<script>
const sheetUrl = "PASTE_LINK_CSV_GOOGLE_SHEET_DI_SINI";

fetch(sheetUrl)
  .then(res => res.text())
  .then(text => {
    const rows = text.trim().split(/\r?\n/).slice(1);
    const box = document.getElementById("produkMember");

    rows.forEach(r => {
      const c = r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/);

      if (!c[0] || !c[1]) return;

      const upload = new Date(c[0]);
      const now = new Date();
      const diffDay = (now - upload) / (1000 * 60 * 60 * 24);

      // ğŸ”¥ AUTO HILANG 7 HARI
      if (diffDay > 7) return;

      const nama = c[1];
      const deskripsi = c[2] || "";
      const harga = c[7] || c[3] || "0";
      const wa = (c[8] || c[4] || "").replace(/[^0-9]/g,"");
      const img = c[9] || c[5] || "";
      const lokasi = c[10] || c[6] || "";

      box.innerHTML += `
        <div class="bg-white rounded shadow p-3">
          ${img ? `
            <img src="${img}" class="w-full h-40 object-cover rounded mb-2">
          ` : `
            <div class="w-full h-40 bg-gray-200 flex items-center justify-center rounded mb-2 text-gray-500">
              Tidak ada foto
            </div>
          `}
          <h3 class="font-bold">${nama}</h3>
          <p class="text-xs text-gray-600">${deskripsi}</p>
          <p class="text-xs mt-1">ğŸ“ ${lokasi}</p>
          <p class="text-green-600 font-bold mt-1">
            Rp ${Number(harga).toLocaleString("id-ID")}
          </p>

          ${wa ? `
            <a href="https://wa.me/${wa}?text=Halo kak, saya tertarik produk ${nama}"
               target="_blank"
               class="block bg-green-600 hover:bg-green-700 text-white text-center py-2 rounded mt-2">
               WhatsApp Penjual
            </a>
          ` : `
            <div class="text-center text-xs text-gray-400 mt-2">
              Nomor WhatsApp tidak tersedia
            </div>
          `}
        </div>
      `;
    });

    if (box.innerHTML === "") {
      box.innerHTML = `
        <div class="col-span-full text-center text-gray-500">
          Belum ada produk aktif
        </div>
      `;
    }
  });
</script>

</body>
</html>